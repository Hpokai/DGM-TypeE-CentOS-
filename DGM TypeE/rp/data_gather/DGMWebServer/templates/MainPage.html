<!doctype html>
<html lang="zh-Hant-TW">

  <title>DGM Web Settings</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">-->
  <link rel="stylesheet" href="/static/css/w3.css">
  <style>
    body {font-family: "Times New Roman", Georgia, Serif;}
    h1,h2,h3,h4,h5,h6 {
        font-family: "Playfair Display";
        letter-spacing: 5px;
    }
  </style>

  <!-- Navbar (sit on top) -->
  <div class="w3-top">
    <div class="w3-bar w3-dark-grey w3-padding w3-card" style="letter-spacing:4px;">
      <a href="#home" class="w3-xxlarge w3-bar-item w3-button">Home</a>
      <!-- Right-sided navbar links. Hide them on small screens -->
      <div class="w3-right w3-hide-small">
        <a href="#info_eq" class="w3-bar-item w3-button">Info for EQ</a>
        <a href="#info_it" class="w3-bar-item w3-button">Info for IT</a>
        <a href="#eth_eq" class="w3-bar-item w3-button">Ethernet for EQ</a>
        <a href="#eth_it" class="w3-bar-item w3-button">Ethernet for IT</a><br>
        <a href="#rate" class="w3-bar-item w3-button">Updating Rate</a>
        <a href="#auth" class="w3-bar-item w3-button">Authorization</a>
        <a href="#del" class="w3-bar-item w3-button">Delete</a>
        <a href="#del" class="w3-bar-item w3-button">Upgrade</a>
        <a href="#del" class="w3-bar-item w3-button">XferLog</a>
        <a class="w3-bar-item w3-text-blue" href="/logout/"><b><u>Logout!</u></u></a>
      </div>
    </div>
  </div>

  <body>
    {% if request.user.is_authenticated %}
    <!-- Header -->
    <header class="w3-display-container w3-content w3-wide" style="max-width:1600px;min-width:400px" id="home">
      <br><br><br><br>
      <h1 class="w3-center w3-xxlarge w3-border-bottom w3-border-grey">
        Data Gather Module
      </h1>
      <!--<b><u><a class="w3-right w3-large" href="/logout/"><font color="blue"> Logout! </font></a></u></u>
      <br>-->
    </header>

    <div class="w3-container">
      <table class="w3-table-all w3-hoverable w3-card-4 w3-centered">
        <thead>
          <tr class="w3-light-blue w3-large">
            <th> \ </th>
            <th> -- Infomation for EQ -- </th>
            <th> -- Infomation for IT -- </th>
          </tr>
        </thead>
        <tr>
          <th class="w3-light-blue"> {{ cell_title.0 }} </th>
          <td> {{ fs.user_name }} </td>
          <td> {{ dc.user_name }} </td>
        </tr>
        <tr>
          <th class="w3-light-blue"> {{ cell_title.1 }} </th>
          <td> {{ fs.ip_address }} </td>
          <td> (Default) </td>
        </tr>
        <tr>
          <th class="w3-light-blue"> {{ cell_title.2 }} </th>
          <td> {{ fs.domain_name }} </td>
          <td> (Default) </td>
        </tr>
        <tr>
            <th class="w3-light-blue"> {{ cell_title.3 }} </th>
            <td> ***** </td>
            <td> ***** </td>
        </tr>
        <tr>
            <th class="w3-light-blue"> {{ cell_title.4 }} </th>
            <td> {{ fs.server_name }} </td>
            <td> (Default) </td>
        </tr>
        <tr>
            <th class="w3-light-blue"> {{ cell_title.5 }} </th>
            <td> (Default) </td>
            <td> (Default) </td>
        </tr>
        <tr>
            <th class="w3-light-blue"> {{ cell_title.6 }} </th>
            <td> {{ fs.folder_name }} </td>
            <td> / </td>
        </tr>
      </table>
    </div>
    <br>
    <div class="w3-container">
      <table class="w3-table-all w3-hoverable w3-card-4 w3-centered">
        <thead>
          <tr class="w3-light-green w3-large">
            <th> \ </th>
            <th> -- Ethernet for EQ -- </th>
            <th> -- Ethernet for IT -- </th>
          </tr>
        </thead>
        <tr>
          <th class="w3-light-green"> IP Address </th>
          <td> {{ uni.eth_ip_address }} </td>
          <td> {{ uni.wlan_ip_address }} </td>
        </tr>
        <tr>
          <th class="w3-light-green"> Mask </th>
          <td> {{ uni.eth_mask }} </td>
          <td> {{ uni.wlan_mask }} </td>
        </tr>
        <tr>
          <th class="w3-light-green"> Gateway </th>
          <td> (Default) </td>
          <td> {{ uni.wlan_gateway }} </td>
        </tr>
      </table>
    </div>
    <br>
    <div class="w3-container w3-row-padding">
      <div class="w3-third">
        <div class="w3-card w3-blue-gray w3-padding">
          <h4 class="w3-center"> -- Updating Rate -- </h4>
          <h5 style="text-shadow:2px 2px 0 #444">
            Minute: {{ osi.uprating_rate_min }} min
          </h5>
          <h5 style="text-shadow:2px 2px 0 #444">
            Second: {{ osi.uprating_rate_sec }} sec
          </h5>
        </div>
      </div>
      <div class="w3-third">
        <div class="w3-card w3-blue-gray w3-padding">
          <h4 class="w3-center"> -- Web Account -- </h4>
          <h5 style="text-shadow:2px 2px 0 #444">
            ID: {{ osi.account_id }}
          </h5>
          <h5 style="text-shadow:2px 2px 0 #444">
            PW: {{ osi.account_pw }}
          </h5>
        </div>
      </div>
      <div class="w3-third">
        <div class="w3-card w3-blue-gray w3-padding">
          <h4 class="w3-center"> -- Authorization -- </h4>
          <h5 style="text-shadow:2px 2px 0 #444">
            {% if osi.auth_result %}
              Serial Key: OK.
            {% else %}
              Serial Key: NG.
            {% endif %}

          </h5>
          <h5 style="text-shadow:2px 2px 0 #444">
            {% if osi.auth_result %}
              Result: Authorized!
            {% else %}
              Result: NOT Authorized!
            {% endif %}
          </h5>





        </div>
      </div>
    </div>

    <!-- Page content -->
    <div class="w3-content w3-padding" style="max-width:1564px">

      <!-- Project Section -->
      <div class="w3-container w3-padding-32" id="info_eq">
        <h2 class="w3-border-bottom w3-border-grey w3-padding-16">Settings</h2>
      </div>

      <form method="post" action="/MainPage/">
        <div class="w3-card w3-padding-large w3-row">
          <div class="w3-padding-large w3-col s6 w3-center">
            <img src="/static/images/eq_info.PNG" style="width:50%;cursor:zoom-in"
            onclick="document.getElementById('modal_eq_info').style.display='block'">

            <div id="modal_eq_info" class="w3-modal" onclick="this.style.display='none'">
              <span class="w3-button w3-hover-red w3-xlarge w3-display-topright">&times;</span>
              <div class="w3-modal-content w3-animate-zoom">
                <img src="/static/images/eq_info.PNG" style="width:100%">
              </div>
            </div>
          </div>
          <div class="w3-padding-large w3-col s6">
            <h3 class="w3-center w3-khaki">Info for EQ</h3>
            <p>
              <label>USER ID:</label>
              <input class="w3-input w3-border" name="userfs" value={{ fs.user_name|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label>Password:</label>
              <input class="w3-input w3-border" name="passwordfs" value={{ fs.password|default:"&nbsp;" }} type="password">
            </p>
            <p>
              <label>IP Address:</label>
              <input class="w3-input w3-border" name="ipaddressfs" value={{ fs.ip_address|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label>Domain Name:</label>
              <input class="w3-input w3-border" name="domainnamefs" value={{ fs.domain_name|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label>Server Name:</label>
              <input class="w3-input w3-border" name="servernamefs" value={{ fs.server_name|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label id="info_it">Folder Name:</label>
              <input class="w3-input w3-border" name="foldernamefs" value={{ fs.folder_name|default:"&nbsp;" }} type="text">
            </p>
          </div>
        </div>

        <div class="w3-card w3-padding-large w3-row">
          <div class="w3-padding-large w3-col s6 w3-center">
            <img src="/static/images/it_info.png" class="w3-image">
          </div>
          <div class="w3-padding-large w3-col s6">
            <h3 class="w3-center w3-khaki">Info for IT</h3>
            <p>
              <label>USER ID:</label>
              <input class="w3-input w3-border w3-light-gray" name="userdc" value={{ dc.user_name|default:"&nbsp;" }} type="text" readonly>
            </p>
            <p id="eth_eq">
              <label>Password:</label>
              <input class="w3-input w3-border w3-light-gray" name="passworddc" value={{ dc.password|default:"&nbsp;" }} type="password" readonly>
            </p>
          </div>
        </div>

        <div class="w3-card w3-padding-large w3-row">
          <div class="w3-padding-large w3-col s6 w3-center">
            <img src="/static/images/eth_eq.png" class="w3-image">
          </div>
          <div class="w3-padding-large w3-col s6">
            <h3 class="w3-center w3-khaki">Ethernet for EQ</h3>
            <p>
              <label>IP Address:</label>
              <input class="w3-input w3-border" name="ethipaddresslm" value={{ uni.eth_ip_address|default:"&nbsp;" }} type="text">
            </p>
            <p id="eth_it">
              <label>Mask:</label>
              <input class="w3-input w3-border" name="ethmasklm" value={{ uni.eth_mask|default:"&nbsp;" }} type="text">
            </p>
          </div>
        </div>

        <div class="w3-card w3-padding-large w3-row">
          <div class="w3-padding-large w3-col s6 w3-center">
            <img src="/static/images/eth_it.png" class="w3-image">
          </div>
          <div class="w3-padding-large w3-col s6">
            <h3 class="w3-center w3-khaki">Ethernet for IT</h3>
            <p>
              <label>IP Address:</label>
              <input class="w3-input w3-border" name="wlanipaddresslm" value={{ uni.wlan_ip_address|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label>Mask:</label>
              <input class="w3-input w3-border" name="wlanmasklm" value={{ uni.wlan_mask|default:"&nbsp;" }} type="text">
            </p>
            <p>
              <label>Gateway:</label>
              <input class="w3-input w3-border" name="wlangatewaylm" value={{ uni.wlan_gateway|default:"&nbsp;" }} type="text">
            </p>
          </div>
        </div>

        <div class="w3-row">
          <div class="w3-card w3-padding-large w3-third" id="rate">
            <h3 class="w3-center w3-khaki">Updating Rate</h3>
            <p>
              <label>Minute:</label>
              <input class="w3-input w3-border" name="updaterateminute" value={{ osi.uprating_rate_min|default:"&nbsp;" }} type="number">
            </p>
            <p>
              <label>Second:</label>
              <input class="w3-input w3-border" name="updateratesecond" value={{ osi.uprating_rate_sec|default:"&nbsp;" }} type="number">
            </p>
          </div>
          <div class="w3-card w3-padding-large w3-third">
            <h3 class="w3-center w3-khaki">Web Account</h3>
            <p>
              <label>ID:</label>
              <input class="w3-input w3-border w3-light-gray" name="accountid" value={{ osi.account_id|default:"&nbsp;" }} type="text" readonly>
            </p>
            <p>
              <label>Password:</label>
              <input class="w3-input w3-border w3-light-gray" name="accountpw" value={{ osi.account_pw|default:"&nbsp;" }} type="text" readonly>
            </p>
          </div>
          <div class="w3-card w3-padding-large w3-third" id="auth">
            <h3 class="w3-center w3-khaki">Authorization</h3>
            <p>
              <label>Product Key:</label>
              <input class="w3-input w3-border w3-light-gray" name="authorizationproductkey" value={{ osi.auth_product|default:"&nbsp;" }} type="text" readonly>
            </p>
            <p>
              <label>Serial Key: </label>
                <label id="showAuth"><b></b></label>
              <input class="w3-input w3-border" name="authorizationserialkey" value={{ osi.auth_serial|default:"&nbsp;" }} type="text" id="serialKey">
            </p>
          </div>
        </div>

        <br><br>

        <div class="w3-center">
          <button class="w3-button w3-wide w3-padding-large w3-card-4 w3-round-large w3-border w3-border-blue" name="Save_submit">Save</button>
        </div>
      </form>
    </div>

    <br><br>

    <!--<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>-->
    <script src="/static/js/jquery-3.1.0.min.js"></script>
    <script>
      $("#serialKey").change(function () {
        var skey = $(this).val();

        $.ajax({
          url: '/ajax/validate_auth/',
          data: {
            'skey': skey
          },
          dataType: 'json',
          success: function (data) {
            if (data.is_match) {
              alert("Serial Key is Authorized!");
              $('#showAuth').html("Authorized!");
            }
            else {
              alert("NOT Authorized!!");
              $('#showAuth').html("NOT Authorized!!");
            }
          }
        });

      });
    </script>


    <div class="w3-content w3-padding" style="max-width:1564px">

      <!-- Functions Section -->
      <div class="w3-container w3-padding-32">
        <h2 class="w3-border-bottom w3-border-grey w3-padding-16">Functions</h2>
      </div>

      <div class="w3-container"  id="del">
        <button onclick="myFunction('Func_del')" class="w3-button w3-block w3-dark-grey w3-left-align">
          <h4>1. Delete template files:</h4>
        </button>
        <div id="Func_del" class="w3-hide w3-container">
          <div class="w3-card-4 w3-padding w3-margin-bottom">
            <p>
              <h3>
                If you want to delet temporary file in DGM first time,
                <br>
                You could click button here:
                <button onclick="document.getElementById('Modal_delete').style.display='block'" class="w3-button w3-round w3-card-4 w3-border w3-border-red">Delete</button>
                <div id="Modal_delete" class="w3-modal">
                  <div class="w3-modal-content w3-card-4">
                    <header class="w3-container w3-black">
                      <h1>Warning!!</h1>
                    </header>
                    <div class="w3-container w3-center w3-padding-32">
                      <h2 class="w3-text-red"><b>Do you want to delete temporary files?</b></h2>
                    </div>
                    <footer class="w3-container">
                      <div class="w3-right">
                        <button onclick="location.href='/MainPage/delete/';" type="button" class="w3-button w3-large w3-red w3-round-large w3-card w3-margin">Delete</button>
                        <button onclick="document.getElementById('Modal_delete').style.display='none'" type="button" class="w3-button w3-large w3-green w3-round-large w3-card w3-margin">Cancel</button>
                      </div>
                    </footer>
                  </div>
                </div>
              </h3>
            </p>
          </div>
        </div>
        <button onclick="myFunction('Func_update')" class="w3-button w3-block w3-dark-grey w3-left-align">
          <h4>2. Upgrade DGM system:</h4>
        </button>
        <div id="Func_update" class="w3-hide w3-container">
          <div class="w3-card-4 w3-padding w3-margin-bottom">
            <p>
                <form method="post" enctype="multipart/form-data">
                  <h3>
                    Please upload the correct file: "UploadDGME.tar"
                    <br><br>
                    <b><input type="file" name="myfile" class="w3-text-teal"></b>
                    <button type="submit" class="w3-button w3-indigo w3-round w3-card w3-right" name="Upload_submit">Upload & Restart</button>
                  </h3>
                </form>
            </p>
          </div>
        </div>
        <button onclick="myFunction('Func_loadlog')" class="w3-button w3-block w3-dark-grey w3-left-align">
          <h4>3. Download two way transfer log file:</h4>
        </button>
        <div id="Func_loadlog" class="w3-hide w3-container">
          <div class="w3-card-4 w3-padding-large w3-margin-bottom">
            <p>
                <form method="post">
                  <h3>
                    <button type="submit" class="w3-button w3-round-xxlarge w3-card-4 w3-pale-green" name="LoadSMBlog_submit">smb_log.zip</button>
                    <button type="submit" class="w3-button w3-round-xxlarge w3-card-4 w3-pale-green w3-margin-left" name="LoadFTPlog_submit">ftp_log.zip</button>
                  </h3>
                </form>
            </p>
          </div>
        </div>



      </div>


    </div>



    <script>
    function myFunction(id) {
        var x = document.getElementById(id);
        if (x.className.indexOf("w3-show") == -1) {
            x.className += " w3-show";
            x.previousElementSibling.className =
            x.previousElementSibling.className.replace("w3-dark-grey", "w3-red");
        } else {
            x.className = x.className.replace(" w3-show", "");
            x.previousElementSibling.className =
            x.previousElementSibling.className.replace("w3-red", "w3-dark-grey");
        }
    }
    </script>
    <br><br><br><br>




    {% else %}

      <br><br><br><br><br><br><br><br>
      <div class="w3-display-container w3-display-middle">
      <div class="w3-card-4 w3-padding-large w3-center w3-pale-green" style="max-width:800px">
        <p>
          <h1>
            You're not logged, try again?
            <br><br>
            <b><u><a href="/login/" class="w3-text-blue">Login</a></u></b>
          </h1>
        </p>
      </div>
      </div>
    {% endif %}
  </body>



</html>
